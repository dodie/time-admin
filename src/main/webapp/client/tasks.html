<lift:surround with="client" at="content">
	<span class="lift:userPreferencesSnippet.actions"></span>
	<span class="lift:taskItemSnippet.actions"></span>

	<span class="lift:jsL10n.addJsLoc">tasks.split_entry</span>
	<span class="lift:jsL10n.addJsLoc">tasks.edit_entry</span>
	<span class="lift:jsL10n.addJsLoc">tasks.confirm_delete</span>
	<span class="lift:jsL10n.addJsLoc">tasks.view.table</span>
	<span class="lift:jsL10n.addJsLoc">tasks.view.timeline</span>
	<span class="lift:jsL10n.addJsLoc">do_not_change</span>

	<div class="tasksPage">
		<div class="container">
			<div class="date-selectors">
				<span class="statusBarItem">
					<a data-tab-aware="" class="btn btn-default btn-xs lift:taskItemSnippet.pagingPrev" paging:url="">&#9664;</a>
				</span>
				<span class="lift:taskItemSnippet.selectedDay"></span>
				<span class="statusBarItem">
					<a data-tab-aware="" class="btn btn-default btn-xs lift:taskItemSnippet.pagingNext" paging:url="">&#9654;</a>
				</span>
				<span class="statusBarItem">
					<a data-tab-aware="" paging:url="" class="btn btn-default btn-xs lift:taskItemSnippet.pagingCurrent">
						<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
					</a>
				</span>
			</div>

			<div id="content" style="display: none;">
				<ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
					<li class="active"><a href="#timeline" data-toggle="tab"><lift:loc>tasks.view.timeline</lift:loc></a></li>
					<li><a href="#table" data-toggle="tab"><lift:loc>tasks.view.table</lift:loc></a></li>
				</ul>
				<div id="my-tab-content" class="tab-content">
					<div class="tab-pane active" id="timeline">
						<div>
							<div id="timeLine" class="timeLine lift:taskItemSnippet.lineChart">
								<div class="frag">
									<div class="fragBar" onclick="var form = this.getElementsByTagName('form')[0]; setTaskItemEditorPopup(form.taskitemid.value, form.time.value, form.taskid.value); $('.modal').modal();">
										<div class="ProjectName"></div>
										<div class="TaskName"></div>
										<form>
											<input type="hidden" name="taskitemid" value=""/>
											<input type="hidden" name="taskid" value=""/>
											<input type="hidden" name="time" value=""/>
										</form>
									</div>
									<div class="fragBarHover">
										<span class="ProjectName"></span>
										<span class="TaskName"></span>
										(<span class="Duration"></span>)

									</div>
									<div class="fragText" onclick="$(this).parent().find('.fragBar')[0].onclick();"></div>
								</div>
							</div>
						</div>
					</div>
					<div class="tab-pane" id="table">
						<div id="taskItemLogMainHolder">
							<div>
								<table class="lift:taskItemSnippet.dataTable table table-condensed">
									<tr>
										<th></th>
										<th></th>
										<th><lift:loc>tasks.table.start</lift:loc></th>
										<th colspan="2"><lift:loc>tasks.table.task</lift:loc></th>
									</tr>
									<tr class="item">
										<td class="edit">
											<form method="post" style="display:inline;">
												<input type="hidden" name="taskitemid" value=""/>
												<input type="hidden" name="taskid" value=""/>
												<input type="hidden" name="time" value=""/>
												<a href="#" onclick="var form = $(this).closest('form')[0]; setTaskItemEditorPopup(form.taskitemid.value, form.time.value, form.taskid.value); $('.modal').modal();" class="btn btn-default btn-xs">
													<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
												</a>
											</form>
										</td>
										<td>
											<div class="projectColorIndicator">-</div>
										</td>
										<td class="date"></td>
										<td style="width:45px;">
											<div class="taskColorIndicator">-&gt;</div>
											<span aria-hidden="true" class="glyphicon glyphicon-pause"></span>
										</td>
										<td><b><span class="project">Project name</span></b>-<span class="task">Task name</span></td>
									</tr>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row tasksrow">
				<div class="col-sm-8">
					<div id="taskItemAppenderMainHolder">
						<div id="holder">
						    <input
							id="taskSearchInput"
							type="text"
							class="TaskFilter form-control lift:L10n.placeholder"
							placeholder="tasks.type_to_filter">
						</div>

						<div id="taskList">
							<form method="post" class="InlineCommandsForm Pause">
								<input type="hidden" name="selecttaskid" value="-1"/>
								<input type="text" class="OfftimeOffsetInput" name="timeoffset" value="" placeholder="hh:mm" autocomplete="off" />
								<a class="btn btn-primary pause-button" onclick="$(this).parent().submit();">
									<span aria-hidden="true" class="glyphicon glyphicon-pause"></span>
								</a>

							</form>
							<div class="lift:taskItemSnippet.selectableTasks tasks">
								<div task:taskstyleclass="" task:rowid="">
									<div class="taskName">
										<form task:formid="" method="post" class="InlineCommandsForm">
											<div class="projectColorIndicator" task:projectcolorindicator="">-</div>
											<input type="hidden" name="selecttaskid" task:taskid=""/>
											<input class="newTaskItemInput" type="text" name="timeoffset" task:placeholder="" value="" autocomplete="off" onfocus="this.value='';" onclick="arguments[0].stopPropagation();" onkeypress="return submitOnEnter(this, event)"/>
											<div class="taskColorIndicator" task:colorindicator="" task:onrowclick="">-&gt;</div>
											<div class="taskName_info" task:onrowclick=""><span class="tasksProjectName"><task:projectname/></span>-<span class="tasksTaskName"><task:taskname/></span> <span class="tasksTaskDescription"><task:taskdescription/></span></div>
											<span style="display:none;" class="newtaskholder">
												-
												<input type="text" name="newtaskname" onkeypress="return submitOnEnter(this, event)"/>
											</span>
										</form>
										<a class="specify-subtask" onclick="toggleSubtaskCreatorForm(this);">
											<span data-open>+ <lift:loc>tasks.new</lift:loc></span>
											<span data-close style="display:none;">- <lift:loc>tasks.cancel</lift:loc></span>
										</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-4">
					<div class="tasksPage">
						<div class="summary">
							<div class="lift:dailySummarySnippet.summaryForToday">
								<div id="pieholder">
								</div>
								<table id="piedata">
									<tbody class="chartContainer">
										<tr class="fragWrapper">
											<td>
												<div class="projectColorIndicator">-</div>
											</td>
											<td>
												<div class="taskColorIndicator">-&gt;</div>
											</td>
											<td><span class="minutes"></span><span>m</span></td>
											<td class="name"></td>
										</tr>
									</tbody>
								</table>
								<div class="summaryMetrics">
									<table>
										<tbody>
											<tr>
												<td>
													<span><lift:loc>dailysummary.fulltime</lift:loc></span>
												</td>
												<td>
													<span class="SumTime"></span>
												</td>
											</tr>
											<tr>
												<td>
													<span><lift:loc>dailysummary.pause</lift:loc></span>
												</td>
												<td>
													<span class="PauseTime"></span><span><lift:loc>minute.short</lift:loc></span>
												</td>
											</tr>
											<tr>
												<td>
													<span><lift:loc>dailysummary.number_of_interrupts</lift:loc></span>
												</td>
												<td>
													<span class="FlowBreak"></span>
												</td>
											</tr>
											<tr>
												<td>
													<span><lift:loc>dailysummary.time_of_arrival</lift:loc></span>
												</td>
												<td>
													<span class="Arrival"></span>
												</td>
											</tr>
											<tr>
												<td>
													<span><lift:loc>dailysummary.time_of_leave</lift:loc></span>
												</td>
												<td>
													<span class="Leave"></span>
													<span class="RealLeave"></span>
												</td>
											</tr>
										</tbody>
									</table>
									<div class="statusBarCurrentTask">
										<span class="lift:taskItemSnippet.actualTask">
											<span><lift:loc>tasks.selected_task</lift:loc></span>
											<span class="actualTaskName"></span>
											<span class="actualDescription"></span>
										</span>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" tabindex="-1" role="dialog">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title"><lift:loc>tasks.changetask.title</lift:loc></h4>
					</div>
					<form method="post">
						<div class="modal-body">
							<input type="hidden" id="tiemode" name="mode" value="taskitemedit"/>
							<input type="hidden" name="taskitemid" id="tietaskitemid"/>
							<input type="hidden" name="sticky" id="tiesticky"/>

							<lift:loc>tasks.changetask.start</lift:loc><br/>
							<input type="text" value="08:15" name="timeoffset" id="tietimeoffset"/> 
							<br/><br/>

							<lift:loc>tasks.changetask.task</lift:loc><br/>
							<select name="selecttaskid" id="tieselecttaskid">
								<option value="-1"><lift:loc>tasks.changetask.pause</lift:loc></option>
							</select>
						</div>
						<div class="modal-footer">
							<input type="submit" value="button.change" class="btn btn-success lift:L10n.value"/>
							<input type="submit" value="button.delete" class="btn btn-danger lift:L10n.value" onclick="return tieDeleteMode();"/>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<script src="/js/client/tasks.js" type="text/javascript"></script>
</lift:surround>
